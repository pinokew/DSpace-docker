# =================================================================
# 1. PROJECT SETTINGS
# =================================================================
COMPOSE_PROJECT_NAME=dspace9
TZ=Europe/Kyiv

# =================================================================
# 2. VERSIONS & IMAGES
# =================================================================
DOCKER_REGISTRY=docker.io
DOCKER_OWNER=dspace

# Основні версії
DSPACE_VERSION=dspace-9_x
DSPACE_UI_VER=dspace-9_x-dist

# Похідні версії (зазвичай співпадають з DSPACE_VERSION)
DSPACE_REST_VER=${DSPACE_VERSION}
DSPACE_SOLR_VER=${DSPACE_VERSION}

# Інфраструктура
POSTGRES_VERSION=15
SOLR_VERSION=9.8
# JDK версія (інформативно, бо вона всередині контейнера)
JDK_VERSION=17


COMPOSE_PROJECT_NAME=dspace9
TZ=Europe/Kyiv

# Network (щоб не ловити overlap — зафіксуй один subnet)
DSPACENET_SUBNET=172.23.0.0/16

# Registry / images
DOCKER_REGISTRY=docker.io
DOCKER_OWNER=dspace

# Versions
DSPACE_VERSION=dspace-9_x
DSPACE_UI_VER=dspace-9_x-dist
DSPACE_REST_VER=${DSPACE_VERSION}
DSPACE_SOLR_VER=${DSPACE_VERSION}
DSPACE_DEPS_VER=${DSPACE_VERSION} 
POSTGRES_VERSION=15
SOLR_VERSION=9.8
JDK_VERSION=17

POSTGRES_DB=dspace
POSTGRES_USER=dspace
POSTGRES_PASSWORD=dspace

# Host ports (на хості)
DSPACE_REST_PORT=8080
DSPACE_REST_DEBUG_PORT=8000
DSPACE_UI_PORT=8081
DSPACE_UI_TEST_PORT=9876
POSTGRES_PORT=5432
SOLR_PORT=8983

# DSpace settings
DSPACE_NAME="DSpace Started with Docker Compose"
DSPACE_CONTAINER_NAME=dspace
PROXIES_TRUSTED_IPRANGES=0.0.0.0/0

# Bootstrap admin (для scripts/bootstrap-admin.sh)
# НЕ коміть реальний пароль у репо — лишай приклад
DSPACE_BOOTSTRAP_ADMIN_EMAIL=admin@edu.ua
DSPACE_BOOTSTRAP_ADMIN_FIRSTNAME=admin
DSPACE_BOOTSTRAP_ADMIN_LASTNAME=admin
DSPACE_BOOTSTRAP_ADMIN_PASSWORD=admin
DSPACE_BOOTSTRAP_ADMIN_LOCALE=uk

# SMTP (поки як заготовка)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=user@example.com
SMTP_PASSWORD=CHANGE_ME
MAIL_FROM=dspace-noreply@example.com
MAIL_ADMIN=dspace-admin@example.com

# UI/REST config generation
DSPACE_UI_HOST=0.0.0.0
DSPACE_UI_NAMESPACE=/
DSPACE_REST_HOST=localhost
DSPACE_REST_NAMESPACE=/server
DSPACE_REST_SSRBASEURL=http://dspace:8080/server


# java
JAVA_OPTS="-Xmx2000m -Djava.security.egd=file:/dev/./urandom"

# For Dev:
# DSPACE_JAVA_TOOL_OPTIONS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000

# ---------- internal ports (inside containers) ----------
POSTGRES_INTERNAL_PORT=5432
SOLR_INTERNAL_PORT=8983
DSPACE_INTERNAL_PORT=8080

# ---------- internal paths ----------
POSTGRES_PGDATA=/pgdata
DSPACE_DIR=/dspace
DSPACE_LOGGING_CONFIG=/dspace/config/log4j2-container.xml

# === Public endpoint (через nginx) ===
PUBLIC_HOST=localhost
PUBLIC_PORT=8081

# === ШЛЯХИ ДО ДАНИХ (VOLUME PATHS) ===
VOL_POSTGRESQL_PATH=$HOME/Dspace/DSpace-volumes/postgresql_data
VOL_SOLR_PATH=$HOME/Dspace/DSpace-volumes/solr_data
VOL_ASSETSTORE_PATH=$HOME/Dspace/DSpace-volumes/assetstore
VOL_EXPORTS_PATH=$HOME/Dspace/DSpace-volumes/exports
VOL_LOGS_PATH=$HOME/Dspace/DSpace-volumes/logs

# Хост та Namespace для Angular (всередині контейнера)
DSPACE_UI_HOST=0.0.0.0
DSPACE_UI_NAMESPACE=/
DSPACE_REST_NAMESPACE=/server

# =================================================================
# 4. NETWORK & SECURITY
# =================================================================
# Фіксована підмережа, щоб уникнути конфліктів
DSPACENET_SUBNET=172.23.0.0/16

# Довірені проксі (0.0.0.0/0 дозволяє всім, це ОК за Nginx)
PROXIES_TRUSTED_IPRANGES=0.0.0.0/0

# =================================================================
# 5. CREDENTIALS (SECRETS)
# =================================================================
POSTGRES_DB=dspace
POSTGRES_USER=dspace
POSTGRES_PASSWORD=dspace

# Bootstrap Admin (для scripts/bootstrap-admin.sh)
DSPACE_BOOTSTRAP_ADMIN_EMAIL=admin@edu.ua
DSPACE_BOOTSTRAP_ADMIN_FIRSTNAME=System
DSPACE_BOOTSTRAP_ADMIN_LASTNAME=Admin
DSPACE_BOOTSTRAP_ADMIN_PASSWORD=admin
DSPACE_BOOTSTRAP_ADMIN_LOCALE=uk

# =================================================================
# 6. INTERNAL CONFIGURATION
# (Налаштування всередині Docker мережі)
# =================================================================
# Внутрішні порти (не змінюй, якщо не знаєш навіщо)
POSTGRES_INTERNAL_PORT=5432
SOLR_INTERNAL_PORT=8983
DSPACE_INTERNAL_PORT=8080

# Шляхи всередині контейнерів
POSTGRES_PGDATA=/pgdata
DSPACE_DIR=/dspace
DSPACE_NAME="KDV Library Repository"

# Java Opts (Оптимізація для контейнера)
JAVA_OPTS="-Xmx2000m -Djava.security.egd=file:/dev/./urandom"

# SSR: Angular звертається до Backend напряму через ім'я контейнера
DSPACE_REST_SSRBASEURL=http://dspace:8080/server

# =================================================================
# 7. HOST VOLUMES (PERSISTENT DATA)
# Де зберігаються дані на твоєму сервері
# =================================================================
VOL_POSTGRESQL_PATH=$HOME/Dspace/DSpace-volumes/postgresql_data
VOL_SOLR_PATH=$HOME/Dspace/DSpace-volumes/solr_data
VOL_ASSETSTORE_PATH=$HOME/Dspace/DSpace-volumes/assetstore
VOL_EXPORTS_PATH=$HOME/Dspace/DSpace-volumes/exports
VOL_LOGS_PATH=$HOME/Dspace/DSpace-volumes/logs

# =================================================================
# 8. OPTIONAL / UNUSED (Але хай буде про всяк випадок)
# =================================================================
# SMTP (Заготовка)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=user@example.com
SMTP_PASSWORD=CHANGE_ME
MAIL_FROM=dspace-noreply@example.com
MAIL_ADMIN=dspace-admin@example.com

# Matomo Tracker URL (якщо будеш підключати аналітику)
MATOMO_TRACKER_URL=http://matomo

# =================================================================
# 9. LOCALHOST
# =================================================================
# NGINX_HTTP_PORT=8081

# DSPACE_UI_BASEURL=http://localhost:8081
# DSPACE_REST_BASEURL=http://localhost:8081/server

# PUBLIC_SSL=false
# DSPACE_UI_SSL=${PUBLIC_SSL}
# DSPACE_REST_SSL=${PUBLIC_SSL}

# =================================================================
# 10. CLOUDFLARE
# =================================================================
# NGINX_HTTP_PORT=8081

# DSPACE_UI_BASEURL=https://repo.fby.com.ua
# DSPACE_REST_BASEURL=https://repo.fby.com.ua/server

# PUBLIC_SSL=true
# DSPACE_UI_SSL=false
# DSPACE_REST_SSL=false

# TUNNEL_TOKEN=

# =================================================================
# 10. NGROK
# =================================================================
DSPACE_UI_BASEURL=https://untaking-amusively-staci.ngrok-free.dev
DSPACE_REST_BASEURL=https://untaking-amusively-staci.ngrok-free.dev/server

# Вказуємо, що ми використовуємо SSL (Ngrok дає HTTPS автоматично)
DSPACE_UI_SSL=true
PUBLIC_SSL=true


NGROK_AUTHTOKEN=
